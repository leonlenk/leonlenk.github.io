---
import Reset from "./reset.astro";
---

<Reset />

<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Leon Lenk's Website</title>

<style is:global>
  /* --- CSS Custom Properties (Color Palette) --- */
  :root {
    /* Primary Colors */
    --color-primary: #007bff;
    --color-primary-light: #00d4ff;
    --color-primary-dark: #0056b3;
    
    /* Background Colors */
    --color-bg-primary: #1c1934;
    --color-bg-secondary: #2d2d2d;
    --color-bg-card: rgba(255, 255, 255, 0.05);
    --color-bg-overlay: rgba(255, 255, 255, 0.02);
    
    /* Text Colors */
    --color-text-primary: #ffffff;
    --color-text-secondary: #cccccc;
    --color-text-muted: #999999;
    --color-text-accent: #add8e6;
    
    /* Border Colors */
    --color-border-primary: rgba(255, 255, 255, 0.1);
    --color-border-secondary: rgba(255, 255, 255, 0.05);
    --color-border-accent: rgba(0, 123, 255, 0.3);
    
    /* Accent Colors */
    --color-accent-blue: #007bff;
    --color-accent-cyan: #00d4ff;
    --color-accent-purple: #9b59b6;
    --color-accent-red: #e74c3c;
    
    /* Status Colors */
    --color-success: #28a745;
    --color-warning: #ffc107;
    --color-error: #dc3545;
    
    /* Gradients */
    --gradient-primary: linear-gradient(135deg, var(--color-primary), var(--color-primary-light));
    --gradient-shimmer: linear-gradient(90deg, var(--color-primary), var(--color-primary-light), var(--color-primary));
    --gradient-progress: linear-gradient(180deg, #4a90e2 0%, #9b59b6 50%, #e74c3c 100%);
    
    /* Shadows */
    --shadow-sm: 0 2px 4px rgba(0, 0, 0, 0.1);
    --shadow-md: 0 4px 20px rgba(0, 0, 0, 0.1);
    --shadow-lg: 0 15px 35px rgba(0, 123, 255, 0.15);
    --shadow-text: 0 0 10px rgba(255, 255, 255, 0.4);
    --shadow-text-strong: 0 0 15px rgba(255, 255, 255, 0.6);
    
    /* Spacing */
    --spacing-xs: 0.5rem;
    --spacing-sm: 1rem;
    --spacing-md: 1.5rem;
    --spacing-lg: 2rem;
    --spacing-xl: 3rem;
    --spacing-2xl: 4rem;
    
    /* Border Radius */
    --radius-sm: 4px;
    --radius-md: 8px;
    --radius-lg: 12px;
    --radius-xl: 16px;
    --radius-2xl: 20px;
    
    /* Transitions */
    --transition-fast: 0.2s ease;
    --transition-normal: 0.3s ease;
    --transition-slow: 0.5s ease;
    
    /* Z-Index */
    --z-dropdown: 1000;
    --z-sticky: 1020;
    --z-fixed: 1030;
    --z-modal-backdrop: 1040;
    --z-modal: 1050;
    --z-popover: 1060;
    --z-tooltip: 1070;
  }

  /* --- Prevent White Flash During Navigation --- */
  html {
    scroll-behavior: smooth;
  }

  /* Ensure all elements inherit the background color */
  *, *::before, *::after {
    box-sizing: border-box;
  }

  /* Prevent any white backgrounds from showing */
  div, section, article, aside, header, footer, main {
    background-color: transparent;
  }

  /* Ensure form elements don't have white backgrounds */
  input, textarea, select, button {
    background-color: var(--color-bg-secondary);
    color: var(--color-text-primary);
  }

  /* --- Lora Variable Font --- */
  @font-face {
    font-family: "Lora";
    src: url("/fonts/Lora/Lora-VariableFont_wght.ttf") format("ttf");
    font-weight: 400 700;
    font-style: normal;
    font-display: swap;
  }

  @font-face {
    font-family: "Lora";
    src: url("/fonts/Lora/Lora-Italic-VariableFont_wght.ttf") format("ttf");
    font-weight: 400 700;
    font-style: italic;
    font-display: swap;
  }

  /* --- Open Sans Variable Font --- */
  @font-face {
    font-family: "Open Sans";
    src: url("/fonts/Open_Sans/OpenSans-VariableFont_wdth,wght.ttf")
      format("ttf");
    font-weight: 300 800;
    font-stretch: 75% 125%;
    font-style: normal;
    font-display: swap;
  }

  @font-face {
    font-family: "Open Sans";
    src: url("/fonts/Open_Sans/OpenSans-Italic-VariableFont_wdth,wght.ttf")
      format("ttf");
    font-weight: 300 800;
    font-stretch: 75% 125%;
    font-style: italic;
    font-display: swap;
  }

  /* --- Base Styles --- */
  body {
    font-family: "Open Sans", sans-serif;
    font-weight: 400;
    color: var(--color-text-secondary);
    font-size: 1.1rem;
    margin: 0;
    padding: 0;
    /* Ensure background color is applied immediately */
    background-attachment: fixed;
  }

  /* --- View Transitions for Smooth Navigation --- */
  @keyframes fade-in {
    from {
      opacity: 0;
      transform: translateY(10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes fade-out {
    from {
      opacity: 1;
      transform: translateY(0);
    }
    to {
      opacity: 0;
      transform: translateY(-10px);
    }
  }

  /* Only apply fade-in animation when there's actual loading delay */
  .loading-transition {
    animation: fade-in 0.3s ease-out;
  }

  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    font-family: "Lora", serif;
    color: var(--color-text-primary);
    text-shadow: var(--shadow-text);
    letter-spacing: 0.03em;
  }

  h1 {
    font-size: 3.2em;
    font-weight: 700;
    text-align: center;
    text-shadow: var(--shadow-text-strong);
  }

  h2 {
    font-size: 2.5em;
    font-weight: 600;
    text-shadow:
      -1px -1px 0 black,
      1px -1px 0 black,
      -1px 1px 0 black,
      1px 1px 0 black;
  }

  h3 {
    font-size: 1.8em;
    font-weight: 500;
    text-shadow:
      -1px -1px 0 black,
      1px -1px 0 black,
      -1px 1px 0 black,
      1px 1px 0 black;
  }

  h4 {
    font-size: 1.4em;
    font-weight: 400;
    text-shadow:
      -1px -1px 0 black,
      1px -1px 0 black,
      -1px 1px 0 black,
      1px 1px 0 black;
  }

  p {
    text-shadow:
      -1px -1px 0 black,
      1px -1px 0 black,
      -1px 1px 0 black,
      1px 1px 0 black;
  }

  a {
    color: var(--color-text-accent);
    text-decoration: none;
    transition: color var(--transition-normal), text-shadow var(--transition-normal);
  }

  a:hover {
    color: var(--color-text-primary);
    text-shadow: 0 0 12px rgba(255, 255, 255, 0.8);
  }

  nav {
    text-align: center;
    padding: 20px 0;
    background: rgba(0, 0, 0, 0.3);
    backdrop-filter: blur(5px);
    border-bottom: 1px solid var(--color-border-primary);
  }

  nav ul {
    list-style: none;
    padding: 0;
    margin: 0;
    display: flex;
    justify-content: center;
    gap: 30px;
  }

  nav li a {
    font-family: "Lora", serif;
    font-size: 1.3em;
    font-weight: 500;
    color: var(--color-text-accent);
    text-shadow: 0 0 5px rgba(173, 216, 230, 0.5);
  }

  nav li a:hover {
    color: var(--color-text-primary);
    text-shadow: 0 0 15px rgba(255, 255, 255, 0.9);
  }
</style>

<script>
  // Prevent white flash during navigation while preserving gradient background
  (function() {
    let isFirstLoad = true;
    let navigationStartTime = 0;
    
    // Handle Astro page transitions
    document.addEventListener('DOMContentLoaded', function() {
      // Handle Astro page transitions
      document.addEventListener('astro:before-swap', function() {
        navigationStartTime = performance.now();
        // Only add fade effect if it's not the first load (indicating navigation)
        if (!isFirstLoad) {
          document.body.style.opacity = '0.95';
          document.body.style.transition = 'opacity 0.1s ease-out';
        }
      });
      
      document.addEventListener('astro:after-swap', function() {
        const navigationTime = performance.now() - navigationStartTime;
        
        // If navigation was fast (cached), don't add transitions
        if (navigationTime < 100) {
          document.body.style.opacity = '1';
          document.body.style.transition = 'none';
        } else {
          // Only add transition for slower loads
          setTimeout(() => {
            document.body.style.opacity = '1';
            document.body.style.transition = 'opacity 0.2s ease-in';
          }, 50);
        }
        
        isFirstLoad = false;
      });
      
      // Handle regular navigation (fallback)
      window.addEventListener('beforeunload', function() {
        // Only add transition if it's not the first page load
        if (!isFirstLoad) {
          document.body.style.opacity = '0.95';
        }
      });
    });
    
    // Ensure the background component is always visible
    document.addEventListener('astro:after-swap', function() {
      const backgroundElement = document.querySelector('.fixedBackground');
      if (backgroundElement) {
        backgroundElement.style.zIndex = '-1';
        backgroundElement.style.display = 'block';
      }
    });
  })();
</script>

<style lang="scss" is:global>
  .pageName {
    margin-top: 100px;
  }

  .pageTextContainer {
    background-color: #2f0ac214;
    border-radius: 2rem;
    position: relative;
    z-index: 1;
    margin: 60px auto;
    margin-bottom: 160px;
    text-justify: inter-word;
    padding: 30px 40px;
    backdrop-filter: blur(0.5px);
    -webkit-backdrop-filter: blur(0.5px); /* For Safari compatibility */
    max-width: 60ch;
    min-width: 20ch;
    height: 100%;
    line-height: 1.6;
  }

  .pageTextContainer img {
    width: 150px;
    height: auto;
    margin-left: 20px;
    margin-right: 10px;
    margin-top: 9px;
    float: right;
  }

  @media (max-width: 768px) {
    .pageTextContainer {
      max-width: 80vw;
      background-color: transparent;
    }
  }
</style>
